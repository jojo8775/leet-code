(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{"5R4e":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return c}));var i=n("mymk"),o=n("X9L9");function a(t){if(null==t)return null;if(t.responseJSON&&null!=t.responseJSON.errorText)return t.responseJSON.errorText;if(null!=t.responseJSON&&null!=t.responseJSON.errors){var e="";for(var n in t.responseJSON.errors)e+="<p>".concat(i.a.capitalizeFirstLetter(n),": ").concat(t.responseJSON.errors[n].toLowerCase(),"</p>");return e}return null}function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(t){var a="".concat(window.location.protocol,"//").concat(window.location.hostname),r=window.location.port?"".concat(a,":").concat(window.location.port):a;if(401!==t.status||i&&-1!==i.indexOf(t.status))if(404!==t.status||i&&-1!==i.indexOf(t.status)){if(!(409!==t.status||i&&-1!==i.indexOf(t.status)))return!0;if(400===t.status&&(!i||-1===i.indexOf(t.status)))return!0}else e(o.b.set(!0));else{var c;if(null===n||void 0===n||null===(c=n.query)||void 0===c?void 0:c.ru)return!1;var s=null;if(n){s=n.pathname;var u="/explore"===n.pathname||"/mycourses"===n.pathname?"/":"/login";return window.location.replace("".concat(r,"/").concat(u,"?ru=").concat(s)),!1}window.location.replace("".concat(r,"/login"))}}return!1}var c=function(t){var e,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(null===t||void 0===t||null===(e=t.responseJSON)||void 0===e?void 0:e.errorText)||(null===t||void 0===t||null===(n=t.responseJSON)||void 0===n||null===(i=n.errors)||void 0===i?void 0:i[o])}},"6tHX":function(t,e,n){var i,o,a;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,o=[e],void 0===(a="function"===typeof(i=function(t){"use strict";function e(t){return o(t)||i(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}t.__esModule=!0,t.onlyChars=t.withoutChars=t.keepUnique=t.default=void 0;var a=function(){function t(t,n,i,o){if(void 0===t&&(t=""),void 0===n&&(n=0),void 0===i&&(i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"),void 0===o&&(o="cfhistuCFHISTU"),this.minLength=n,"number"!==typeof n)throw new TypeError("Hashids: Provided 'minLength' has to be a number (is "+typeof n+")");if("string"!==typeof t)throw new TypeError("Hashids: Provided 'salt' has to be a string (is "+typeof t+")");if("string"!==typeof i)throw new TypeError("Hashids: Provided alphabet has to be a string (is "+typeof i+")");var a=Array.from(t),p=Array.from(i),f=Array.from(o);this.salt=a;var g=u(p);if(g.length<r)throw new Error("Hashids: alphabet must contain at least "+r+" unique characters, provided: "+g);this.alphabet=l(g,f);var h,b,y,O=d(f,g);this.seps=v(O,a),(0===this.seps.length||this.alphabet.length/this.seps.length>c)&&(h=Math.ceil(this.alphabet.length/c))>this.seps.length&&(b=h-this.seps.length,(y=this.seps).push.apply(y,e(this.alphabet.slice(0,b))),this.alphabet=this.alphabet.slice(b)),this.alphabet=v(this.alphabet,a);var j=Math.ceil(this.alphabet.length/s);this.alphabet.length<3?(this.guards=this.seps.slice(0,j),this.seps=this.seps.slice(j)):(this.guards=this.alphabet.slice(0,j),this.alphabet=this.alphabet.slice(j)),this.guardsRegExp=_(this.guards),this.sepsRegExp=_(this.seps),this.allowedCharsRegExp=m([].concat(e(this.alphabet),e(this.guards),e(this.seps)))}var n=t.prototype;return n.encode=function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a="";return(i=Array.isArray(t)?t:[].concat(e(null!=t?[t]:[]),e(i))).length?(i.every(p)||(i=i.map((function(t){return"bigint"===typeof t||"number"===typeof t?t:y(String(t))}))),i.every(f)?this._encode(i).join(""):a):a},n.decode=function(t){return t&&"string"===typeof t&&0!==t.length?this._decode(t):[]},n.encodeHex=function(t){switch(typeof t){case"bigint":t=t.toString(16);break;case"string":if(!/^[0-9a-fA-F]+$/.test(t))return"";break;default:throw new Error("Hashids: The provided value is neither a string, nor a BigInt (got: "+typeof t+")")}var e=O(t,12,(function(t){return parseInt("1"+t,16)}));return this.encode(e)},n.decodeHex=function(t){return this.decode(t).map((function(t){return t.toString(16).slice(1)})).join("")},n._encode=function(t){var n=this,i=this.alphabet,o=t.reduce((function(t,e,n){return t+("bigint"===typeof e?Number(e%BigInt(n+100)):e%(n+100))}),0),a=[i[o%i.length]],r=a.slice(),c=this.seps,s=this.guards;if(t.forEach((function(o,s){var u,l=r.concat(n.salt,i);i=v(i,l);var d=g(o,i);if((u=a).push.apply(u,e(d)),s+1<t.length){var p=d[0].codePointAt(0)+s,f="bigint"===typeof o?Number(o%BigInt(p)):o%p;a.push(c[f%c.length])}})),a.length<this.minLength){var u=(o+a[0].codePointAt(0))%s.length;if(a.unshift(s[u]),a.length<this.minLength){var l=(o+a[2].codePointAt(0))%s.length;a.push(s[l])}}for(var d=Math.floor(i.length/2);a.length<this.minLength;){var p,f;i=v(i,i),(p=a).unshift.apply(p,e(i.slice(d))),(f=a).push.apply(f,e(i.slice(0,d)));var h=a.length-this.minLength;if(h>0){var b=h/2;a=a.slice(b,b+this.minLength)}}return a},n.isValidId=function(t){return this.allowedCharsRegExp.test(t)},n._decode=function(t){if(!this.isValidId(t))throw new Error("The provided ID ("+t+") is invalid, as it contains characters that do not exist in the alphabet ("+this.guards.join("")+this.seps.join("")+this.alphabet.join("")+")");var n=t.split(this.guardsRegExp),i=n[3===n.length||2===n.length?1:0];if(0===i.length)return[];var o=i[Symbol.iterator]().next().value,a=i.slice(o.length).split(this.sepsRegExp),r=this.alphabet,c=[],s=a,u=Array.isArray(s),l=0;for(s=u?s:s[Symbol.iterator]();;){var d;if(u){if(l>=s.length)break;d=s[l++]}else{if((l=s.next()).done)break;d=l.value}var p=d,f=v(r,[o].concat(e(this.salt),e(r)).slice(0,r.length));c.push(h(Array.from(p),f)),r=f}return this._encode(c).join("")!==t?[]:c},t}();t.default=a;var r=16,c=3.5,s=12,u=function(t){return Array.from(new Set(t))};t.keepUnique=u;var l=function(t,e){return t.filter((function(t){return!e.includes(t)}))};t.withoutChars=l;var d=function(t,e){return t.filter((function(t){return e.includes(t)}))};t.onlyChars=d;var p=function(t){return"bigint"===typeof t||!Number.isNaN(Number(t))&&Math.floor(Number(t))===t},f=function(t){return"bigint"===typeof t||t>=0&&Number.isSafeInteger(t)};function v(t,e){if(0===e.length)return t;for(var n,i=t.slice(),o=i.length-1,a=0,r=0;o>0;o--,a++){r+=n=e[a%=e.length].codePointAt(0);var c=(n+a+r)%o,s=i[o],u=i[c];i[c]=s,i[o]=u}return i}var g=function(t,e){var n=[];if("bigint"===typeof t){var i=BigInt(e.length);do{n.unshift(e[Number(t%i)]),t/=i}while(t>BigInt(0))}else do{n.unshift(e[t%e.length]),t=Math.floor(t/e.length)}while(t>0);return n},h=function(t,e){return t.reduce((function(n,i){var o=e.indexOf(i);if(-1===o)throw new Error("The provided ID ("+t.join("")+") is invalid, as it contains characters that do not exist in the alphabet ("+e.join("")+")");if("bigint"===typeof n)return n*BigInt(e.length)+BigInt(o);var a=n*e.length+o;if(Number.isSafeInteger(a))return a;if("function"===typeof BigInt)return BigInt(n)*BigInt(e.length)+BigInt(o);throw new Error("Unable to decode the provided string, due to lack of support for BigInt numbers in the current environment")}),0)},b=/^\+?[0-9]+$/,y=function(t){return b.test(t)?parseInt(t,10):NaN},O=function(t,e,n){return Array.from({length:Math.ceil(t.length/e)},(function(i,o){return n(t.slice(o*e,(o+1)*e))}))},_=function(t){return new RegExp(t.map((function(t){return j(t)})).sort((function(t,e){return e.length-t.length})).join("|"))},m=function(t){return new RegExp("^["+t.map((function(t){return j(t)})).sort((function(t,e){return e.length-t.length})).join("")+"]+$")},j=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}})?i.apply(e,o):i)||(t.exports=a)},"9dyO":function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n("rePB"),o=n("Ff2n"),a=n("i7Pf"),r=n("uNJL"),c=n("Cjvp"),s=n("jxKE"),u=n("Vgjn"),l=n("fh7V"),d=n("rfrl"),p=n("I1F8");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=Object(a.b)({name:"author/collection",initialState:{},reducers:{reset:function(){return{}},set:function(t,e){var n=e.payload;return Object(d.a)(n,(function(e){var n,i,o,a,r,c;e.instance.details.toc||(e.instance.details.toc={categories:[]}),e.instance.details.udata_files||(e.instance.details.udata_files=[]),e.instance.details.skills||(e.instance.details.skills=[]),e.instance.details.CodeThemes=e.instance.details.default_themes?e.instance.details.default_themes.code_themes:{Code:"default",Markdown:"default",RunJS:"default",SPA:"default"},e.instance.details.CodeThemes.isForced=null!==(n=e.instance.details.CodeThemes.isForced)&&void 0!==n?n:l.a,e.instance.details.docker.container.track=null!==(i=null===t||void 0===t||null===(o=t.instance)||void 0===o||null===(a=o.details)||void 0===a||null===(r=a.docker)||void 0===r||null===(c=r.container)||void 0===c?void 0:c.track)&&void 0!==i&&i,e.instance.details.toc.categories.length||m(e);var u=e.instance.details.page_titles;e.instance.details.toc.categories.forEach((function(t){return t.pages.forEach((function(t){var e;[s.L.LESSON,s.L.SHOT].includes(t.type)||(t.title=null!==(e=null===u||void 0===u?void 0:u[null===t||void 0===t?void 0:t.id])&&void 0!==e?e:s.a)}))}))}))},certificateBought:function(t){t.has_purchased_certificate=!0},updateDetails:function(t,e){var n=e.payload,i=(n.docker,n.deleted_page_details,Object(o.a)(n,["docker","deleted_page_details"]));t.instance.details.toc.categories.forEach((function(t){return t.pages.forEach((function(t){return t.is_recovered=!1}))})),t.instance.details=v(v({},t.instance.details),i)},addCategory:function(t,e){var n,i,o,a,r,c=e.payload,u=c.index,l=c.parentIndex,d=c.type,f=void 0===d?s.d.COLLECTION_CATEGORY:d,g=c.id,b=void 0===g?void 0:g,y=c.data,m=void 0===y?{}:y,j=(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i?void 0:i.work_type)===s.j.PATH,S=null===t||void 0===t||null===(o=t.instance)||void 0===o||null===(a=o.details)||void 0===a||null===(r=a.toc)||void 0===r?void 0:r.categories,w=O(S);if(w){var x=t.instance.details.toc.categories[0].author_id,E=t.instance.details.toc.categories[0].collection_id,k=t.instance.details.toc.categories[0].id;t.instance.details.toc.categories[0].title=void 0===m.title?"Untitled category":m.title,t.instance.details.toc.categories[0].author_id=m.author_id||x,t.instance.details.toc.categories[0].collection_id=m.collection_id||E,t.instance.details.toc.categories[0].id=m.id||k,t.instance.details.toc.categories[0].editMode=f!==s.d.ASSESSMENT&&!j,m.type&&(t.instance.details.toc.categories[0].type=m.type)}f!==s.d.ASSESSMENT&&w||(h(t,!1,f!==s.d.ASSESSMENT&&!j,!1,u,l,f,b,v(v({},m),{},{title:j?m.title||"Untitled category":m.title})),function(t){var e,n,i,o=null===t||void 0===t||null===(e=t.instance)||void 0===e||null===(n=e.details)||void 0===n||null===(i=n.toc)||void 0===i?void 0:i.categories,a=_(o,p.a);if(-1!==a){var r=t.instance.details.toc.categories[a];t.instance.details.toc.categories.push(r),t.instance.details.toc.categories.splice(a,1)}}(t))},updateCategoryTitle:function(t,e){var n,i,o,a=e.payload,r=a.title,c=a.id,s=_(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.toc)||void 0===o?void 0:o.categories,c);t.instance.details.toc.categories[s].title="__default"!==r?r:"",t.instance.details.toc.categories[s].editMode=!1},updateArticleTags:function(t,e){var n,i,o=e.payload,a=o.pageId,r=o.tags;[s.j.MODULE,s.j.PATH].includes(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i?void 0:i.work_type)||(t.instance.details.page_tags[a]=r)},updateArticleTitle:function(t,e){var n=e.payload,i=n.categoryId,o=n.pageId,a=n.title;if(t.instance){if(i){var r,c,s,u,l,d,p,f,v=_(null===t||void 0===t||null===(r=t.instance)||void 0===r||null===(c=r.details)||void 0===c||null===(s=c.toc)||void 0===s?void 0:s.categories,i),g=_(null===t||void 0===t||null===(u=t.instance)||void 0===u||null===(l=u.details)||void 0===l||null===(d=l.toc)||void 0===d||null===(p=d.categories)||void 0===p||null===(f=p[v])||void 0===f?void 0:f.pages,o);t.instance.details.toc.categories[v].pages[g].title=a,t.instance.details.toc.categories[v].pages[g].editMode=!1}t.instance.details.page_titles[o]=a}},removeCategory:function(t,e){var n,i,o,a,r,c,s,u=e.payload.id,l=_(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.toc)||void 0===o?void 0:o.categories,u);t.instance.details.toc.categories.splice(l,1),(null===t||void 0===t||null===(a=t.instance)||void 0===a||null===(r=a.details)||void 0===r||null===(c=r.toc)||void 0===c||null===(s=c.categories)||void 0===s?void 0:s.length)||m(t)},updateCodeExecResourceFile:function(t,e){var n=e.payload;t.instance.details.code_exec_resource_metadata=n},updateDockerForExternalLesson:function(t,e){var n=e.payload;t.instance.details.docker=n.docker},addUserDataResourceFile:function(t,e){var n=e.payload;t.instance.details.udata_files.push(n)},updateUserDataResourceFile:function(t,e){var n=e.payload,i=n.payload,o=n.index;t.instance.details.udata_files[o]=v(v({},t.instance.details.udata_files[o]),i)},removeUserDataResourceFile:function(t,e){var n=e.payload.index;t.instance.details.udata_files.splice(n,1)},removeCoverImage:function(t){t.instance.details.cover_image_id=null},saveAPIKey:function(t,e){var n,i,o,r=e.payload.apiKey,c=r.id,s=void 0===c?"":c,u=r.key,l=void 0===u?"":u,d=r.value,p=void 0===d?"":d,f=r.useAsDefault,v=void 0===f||f,g=r.urlText,h=void 0===g?"":g,b=l,y=null!==(n=null===t||void 0===t||null===(i=t.instance)||void 0===i||null===(o=i.details)||void 0===o?void 0:o.api_keys)&&void 0!==n?n:[],O={id:s||Object(a.d)(),key:l,name:b,value:p,urlText:h,useAsDefault:v},_=y.findIndex((function(t){return t.id===s}));-1!==_?t.instance.details.api_keys[_]=O:t.instance.details.api_keys.push(O)},removeAPIKey:function(t,e){var n,i,o=e.payload,a=(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i?void 0:i.api_keys).findIndex((function(t){return t.id===o.id}));if(-1===a)return t;t.instance.details.api_keys.splice(a,1)},updateTestimonialImage:function(t,e){var n=e.payload,i=n.payload,o=n.index;t.instance.details.testimonials[o].pic=i},addTestimonial:function(t,e){var n=e.payload.testimonial;t.instance.details.testimonials||(t.instance.details.testimonials=[]),t.instance.details.testimonials.push(n)},removeTestimonial:function(t,e){var n=e.payload.index;t.instance.details.testimonials.splice(n,1)},updateTestimonial:function(t,e){var n=e.payload,i=n.index,o=n.testimonial;t.instance.details.testimonials[i]=o},changeTestimonialOrder:function(t,e){var n=e.payload.testimonials;t.instance.details.testimonials=n},addArticle:function(t,e){var n,i,o,a,r,c=e.payload,u=c.category_id,l=c.article,d=c.index,p=c.data,f=void 0===p?{}:p,v=(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i?void 0:i.work_type)===s.j.PATH,g=_(null===t||void 0===t||null===(o=t.instance)||void 0===o||null===(a=o.details)||void 0===a||null===(r=a.toc)||void 0===r?void 0:r.categories,u);b(t,l,g,d,f,v)},updateETAG:function(t,e){var n=e.payload;t[u.a]=n},cloneArticle:function(t,e){var n,i,o,a=e.payload,r=a.category_id,c=a.article,s=_(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.toc)||void 0===o?void 0:o.categories,r);y(t,c,s)},removeArticle:function(t,e){var n,i,o,a,r,c,s,u,l=e.payload,d=l.category_id,p=l.article_id,f=_(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.toc)||void 0===o?void 0:o.categories,d),v=_(null===t||void 0===t||null===(a=t.instance)||void 0===a||null===(r=a.details)||void 0===r||null===(c=r.toc)||void 0===c||null===(s=c.categories)||void 0===s||null===(u=s[f])||void 0===u?void 0:u.pages,p);t.instance.details.toc.categories[f].pages.splice(v,1),t.instance.details.deleted_page_details={}},recoverArticle:function(t,e){var n,i,o,a,r,c,s,u,l,d,f,v,g=e.payload.article_id,y=_(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.toc)||void 0===o?void 0:o.categories,p.a);-1===y&&function(t){h(t,!1,!1,!0)}(t),y=_(null===t||void 0===t||null===(a=t.instance)||void 0===a||null===(r=a.details)||void 0===r||null===(c=r.toc)||void 0===c?void 0:c.categories,p.a),b(t,{page_id:g},y,null);var O=null===t||void 0===t||null===(s=t.instance)||void 0===s||null===(u=s.details)||void 0===u||null===(l=u.deleted_page_details)||void 0===l?void 0:l[g.toString()],m=O?O.title:"Untitled Masterpiece";null===t||void 0===t||(null===(d=t.instance)||void 0===d||(null===(f=d.details)||void 0===f||(null===(v=f.deleted_page_details)||void 0===v||delete v[g.toString()]))),t.instance.details.page_titles[g]=m},updateDeletedArticles:function(t,e){var n=e.payload;t.instance.details.deleted_page_details=v(v({},t.instance.details.deleted_page_details),n)},toggleArticleVisibility:function(t,e){var n,i,o,a,r,c,s,u,l=e.payload,d=l.category_id,p=l.article_id,f=_(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.toc)||void 0===o?void 0:o.categories,d),v=_(null===t||void 0===t||null===(a=t.instance)||void 0===a||null===(r=a.details)||void 0===r||null===(c=r.toc)||void 0===c||null===(s=c.categories)||void 0===s||null===(u=s[f])||void 0===u?void 0:u.pages,p),g=t.instance.details.toc.categories[f].pages[v];g.is_preview=!g.is_preview},toggleIsLesson:function(t,e){var n,i,o,a,r,c,s,u,l=e.payload,d=l.category_id,p=l.article_id,f=_(null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.toc)||void 0===o?void 0:o.categories,d),v=_(null===t||void 0===t||null===(a=t.instance)||void 0===a||null===(r=a.details)||void 0===r||null===(c=r.toc)||void 0===c||null===(s=c.categories)||void 0===s||null===(u=s[f])||void 0===u?void 0:u.pages,p),g=t.instance.details.toc.categories[f].pages[v];g.is_lesson=!(void 0===g.is_lesson||!0===g.is_lesson)},discardChanges:function(t,e){return e.payload.originalCollection},publish:function(t){t.instance.type="published"},moveCategory:function(t,e){var n,i,o,a,r,c,s,u,l=e.payload,d=l.from,f=l.to,v=null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.toc)||void 0===o||null===(a=o.categories)||void 0===a?void 0:a[d.itemIndex];return v.id===p.a||(null===t||void 0===t||null===(r=t.instance)||void 0===r||null===(c=r.details)||void 0===c||null===(s=c.toc)||void 0===s||null===(u=s.categories)||void 0===u?void 0:u[f.itemIndex]).id===p.a?t:(t.instance.details.toc.categories.splice(d.itemIndex,1),void t.instance.details.toc.categories.splice(f.itemIndex,0,v))},setExternalOffer:function(t,e){var n=e.payload.externalOffer;return t.external_offer=n,t},hideExternalOffer:function(t){t.external_offer.hidden=!0},setExternalOfferViewed:function(t){t.external_offer.viewed=!0},moveArticleWithinOrigin:function(t,e){var n,i,o,a,r,c=e.payload,s=c.from,u=c.to,l=null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.toc)||void 0===o||null===(a=o.categories)||void 0===a||null===(r=a[s.parentIndex])||void 0===r?void 0:r.pages;l.splice(u.itemIndex,0,l.splice(s.itemIndex,1)[0])},moveArticleToNotEmptyCategory:function(t,e){var n,i,o,a,r,c,s,u,l,d,f,v,g,h=e.payload,b=h.from,y=h.to;if((null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i||null===(o=i.toc)||void 0===o||null===(a=o.categories)||void 0===a||null===(r=a[y.parentIndex])||void 0===r?void 0:r.id)===p.a)return t;(null===t||void 0===t||null===(c=t.instance)||void 0===c||null===(s=c.details)||void 0===s||null===(u=s.toc)||void 0===u||null===(l=u.categories)||void 0===l||null===(d=l[b.parentIndex])||void 0===d?void 0:d.id)===p.a&&(t.instance.details.toc.categories[b.parentIndex].pages[b.itemIndex].is_recovered=!0);var O=null===t||void 0===t||null===(f=t.instance)||void 0===f||null===(v=f.details)||void 0===v||null===(g=v.toc)||void 0===g?void 0:g.categories;O[y.parentIndex].pages.splice(y.itemIndex,0,O[b.parentIndex].pages.splice(b.itemIndex,1)[0])},setDirty:function(t,e){var n=e.payload;t.instance.dirty=n},setNotification:function(t,e){var n=e.payload;t.notification_status=n}}}),h=function(t,e,n,i,o,a){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:s.d.COLLECTION_CATEGORY,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},d=t.instance.details.toc.categories;if(d.forEach((function(t){return t.editMode=!1})),void 0!==a){var p=d[a].pages,f=p.splice(o+1),v=p=p.slice(0,o+1),g=new r.a(e,n);if((g=JSON.parse(JSON.stringify(g))).pages=f,d[a].pages=v,d.splice(a+1,0,g),c===s.d.ASSESSMENT){var h=new r.a(!1,n,i,c,u);h=JSON.parse(JSON.stringify(h)),d.push(h)}}else{var b=new r.a(e,n,i,l.type||c,l.id||u,l.author_id,l.collection_id,l.title);b=JSON.parse(JSON.stringify(b)),d.push(b)}},b=function(t,e,n,i){var o,a,r,u,l,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},p=arguments.length>5&&void 0!==arguments[5]&&arguments[5],f=null===e||void 0===e?void 0:e.page_id,v=null===e||void 0===e?void 0:e.author_id,g=null===e||void 0===e?void 0:e.collection_id,h=f in(j(t)||{});if(null==i){var b,y,O,_,m,S=new c.a(parseInt(f||d.id),d.type,d.title,parseInt(v||d.author_id),parseInt(g||d.collection_id),parseInt(f||d.page_id),!p&&![s.L.LESSON,s.L.SHOT].includes(null===d||void 0===d?void 0:d.type));if(h){var w,x,E=null===t||void 0===t||null===(w=t.instance)||void 0===w||null===(x=w.details)||void 0===x?void 0:x.deleted_page_details[f.toString()].title;S.title=E,S.editMode=!1}null===t||void 0===t||null===(b=t.instance)||void 0===b||null===(y=b.details)||void 0===y||null===(O=y.toc)||void 0===O||null===(_=O.categories)||void 0===_||null===(m=_[n])||void 0===m||m.pages.push(JSON.parse(JSON.stringify(S)))}else null===t||void 0===t||null===(o=t.instance)||void 0===o||null===(a=o.details)||void 0===a||null===(r=a.toc)||void 0===r||null===(u=r.categories)||void 0===u||null===(l=u[n])||void 0===l||l.pages.splice(i+1,0,JSON.parse(JSON.stringify(new c.a(parseInt(f||d.id),d.type,d.title,parseInt(v||d.author_id),parseInt(g||d.collection_id),parseInt(f||d.page_id),!p&&![s.L.LESSON,s.L.SHOT].includes(null===d||void 0===d?void 0:d.type)))))},y=function(t,e,n){var i,o,a,r,s,u=e.page_id;e.title;return null===t||void 0===t||null===(i=t.instance)||void 0===i||null===(o=i.details)||void 0===o||null===(a=o.toc)||void 0===a||null===(r=a.categories)||void 0===r||null===(s=r[n])||void 0===s?void 0:s.pages.push(JSON.parse(JSON.stringify(new c.a(u))))},O=function(t){return"__default"===(null===t||void 0===t?void 0:t[0].title)},_=function(t,e){return t.findIndex((function(t){return t.id===e}))},m=function(t){return h(t,!0,!1)};function j(t){var e,n;return null===t||void 0===t||null===(e=t.instance)||void 0===e||null===(n=e.details)||void 0===n?void 0:n.deleted_page_details}e.b=g.reducer;var S=g.actions},"9jYD":function(t,e,n){"use strict";var i=n("jxKE");e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t===i.j.PATH?"".concat(i.j.PATH).concat(e?"/lesson":""):t===i.j.MODULE?"".concat(i.j.MODULE).concat(e?"/lesson":""):"courses"}},"9wcz":function(t,e,n){t.exports=n("6tHX").default},AkIC:function(t,e,n){"use strict";n.d(e,"b",(function(){return a}));var i=n("i7Pf"),o=Object(i.b)({name:"loader",initialState:{isLoaded:!1,isLoading:!1},reducers:{set:function(t,e){var n=e.payload;void 0!==n.isLoaded&&(t.isLoaded=n.isLoaded),void 0!==n.isLoading&&(t.isLoading=n.isLoading)}}});e.a=o.reducer;var a=o.actions},Cjvp:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("1OyB"),o=n("rePB"),a=n("jxKE"),r=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.r.COLLECTION_LESSON,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];Object(i.a)(this,t),Object(o.a)(this,"id",void 0),Object(o.a)(this,"title",void 0),Object(o.a)(this,"is_preview",void 0),Object(o.a)(this,"parentIndex",void 0),Object(o.a)(this,"editMode",void 0),Object(o.a)(this,"is_recovered",void 0),Object(o.a)(this,"type",void 0),Object(o.a)(this,"is_lesson",void 0),Object(o.a)(this,"author_id",void 0),Object(o.a)(this,"collection_id",void 0),Object(o.a)(this,"page_id",void 0),this.id=e,this.title=r,this.is_preview=!1,this.parentIndex=null,this.editMode=l,this.is_recovered=!1,this.type=n,this.author_id=c,this.collection_id=s,this.page_id=u}},HdLI:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return p}));var i=n("ODXe"),o=n("rePB");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw a}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u={keywords:{regex:/#key# [^#|^\n]+:[^#|^\n]+ #key#/g,parse:function(t){var e=t.slice(6,-6),n=e.match(/[^:|^\n]+:/g),i=e.match(/:[^\n]+/g);return{word:n&&n[0].slice(0,-1).trim(),meaning:i&&i[0].substring(1).trim()}},transform:function(t){var e=t.word,n=t.meaning;return e&&n?"<keyword><word>".concat(e,"</word><meaning>").concat(n,"</meaning></keyword>"):null}},concepts:{regex:/#concept=[^#|^\n]+#[^\n]+#concept#/g,parse:function(t){var e=t.match(/#concept=[^#|^\n]+#/g)[0],n=e.slice(9,-1).trim();return{word:t.slice(e.length).match(/[^\n]+#concept#/g)[0].slice(0,-9).trim(),name:n}},transform:function(t){var e=t.word,n=t.name;return e&&n?"<concept><word>".concat(e,"</word><name>").concat(n,"</name></concept>"):null}}},l=function(t,e){var n,i=e.regex,o=e.parse,a=e.transform,r=c(t.match(i)||[]);try{for(r.s();!(n=r.n()).done;){var s=n.value,u=a(o(s));u&&(t=t.replace(s,u))}}catch(l){r.e(l)}finally{r.f()}return t},d=function(t,e){if(!t)return"";for(var n=e.reduce((function(t,e){return r(r({},t),{},Object(o.a)({},e,!0))}),{}),a=0,c=Object.entries(u);a<c.length;a++){var s=c[a],d=Object(i.a)(s,2),p=d[0],f=d[1];n[p]||(t=l(t,f))}return t},p=function(t,e){var n=u[e];if(!n)return[];var i=n.regex,o=n.parse;return(t.match(i)||[]).map(o)}},I1F8:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i="RECOVERED_ARTICLES"},NHG4:function(t,e,n){"use strict";n.d(e,"a",(function(){return C})),n.d(e,"c",(function(){return D})),n.d(e,"d",(function(){return M})),n.d(e,"e",(function(){return F}));var i=n("KQm4"),o=n("o0o1"),a=n.n(o),r=n("HaE+"),c=n("rePB"),s=n("03FM"),u=n("396a"),l=n("i7Pf"),d=n("uNJL"),p=n("Cjvp"),f=n("jxKE"),v=n("Vgjn"),g=n("VMC0"),h=n("XZhq"),b=n("5R4e"),y=n("OYQK"),O=n("clVV"),_=n("QJIx"),m=n("Evd+"),j=n("OpYl"),S=n("pLgj"),w=n("fNkK"),x=n("HdLI");function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={categories:[JSON.parse(JSON.stringify(new d.a(!0,!1,!1,f.d.ASSESSMENT_CATEGORY)))]},P=function(t,e){return t.findIndex((function(t){return t.id===e}))},T=Object(s.a)(),N=T.initialState,L=T.reducers,A=Object(l.b)({name:"assessment",initialState:k(k({},N),{},{question:null}),reducers:k(k({},L),{},{updateAssessmentTitle:function(t,e){var n=e.payload;t.data.title=n,t.data.dirty=!0},updateAssessmentTimeLimit:function(t,e){var n=e.payload;t.data.time_limit=n,t.data.dirty=!0},updateAssessmentMaxAttempts:function(t,e){var n=e.payload;t.data.max_attempts=n,t.data.dirty=!0},updateAssessmentSummary:function(t,e){var n=e.payload;t.data.summary=n,t.data.dirty=!0},addUserDataResourceFile:function(t,e){var n=e.payload;t.data.udata_files.push(n),t.data.dirty=!0},updateUserDataResourceFile:function(t,e){var n=e.payload,i=n.payload,o=n.index;t.data.udata_files[o]=k(k({},t.data.udata_files[o]),i),t.data.dirty=!0},removeUserDataResourceFile:function(t,e){var n=e.payload.index;t.data.udata_files.splice(n,1),t.data.dirty=!0},addCategory:function(t,e){var n,i,o=e.payload,a=o.index,r=o.parentIndex;(function(t){return"__default"===(null===t||void 0===t?void 0:t[0].title)})(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.toc)||void 0===i?void 0:i.categories)?(t.data.toc.categories[0].title="Untitled category",t.data.toc.categories[0].editMode=!0):function(t,e,n,i,o){var a=t.toc.categories;if(a.forEach((function(t){return t.editMode=!1})),void 0!==o){var r=a[o].pages,c=r.splice(i+1),s=r=r.slice(0,i+1),u=new d.a(!1,e,!1,f.d.ASSESSMENT_CATEGORY);(u=JSON.parse(JSON.stringify(u))).pages=c,a[o].pages=s,a.splice(o+1,0,u)}else{var l=new d.a(!1,e,n,f.d.ASSESSMENT_CATEGORY);l=JSON.parse(JSON.stringify(l)),a.push(l)}}(t.data,!0,!1,a,r),t.data.dirty=!0},addQuestion:function(t,e){var n,i,o=e.payload,a=o.category_id,r=o.question,c=o.index;!function(t,e,n,i){var o,a,r,c,s=e.question_id;if(null==i){var u,l,d,v,g=new p.a(parseInt(s),f.r.ASSESSMENT_QUESTION);null===t||void 0===t||null===(u=t.data)||void 0===u||null===(l=u.toc)||void 0===l||null===(d=l.categories)||void 0===d||null===(v=d[n])||void 0===v||v.pages.push(JSON.parse(JSON.stringify(g)))}else null===t||void 0===t||null===(o=t.data)||void 0===o||null===(a=o.toc)||void 0===a||null===(r=a.categories)||void 0===r||null===(c=r[n])||void 0===c||c.pages.splice(i+1,0,JSON.parse(JSON.stringify(new p.a(parseInt(s),f.r.ASSESSMENT_QUESTION))))}(t,r,P(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.toc)||void 0===i?void 0:i.categories,a),c),t.data.dirty=!0},updateCategoryTitle:function(t,e){var n,i,o=e.payload,a=o.title,r=o.id,c=P(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.toc)||void 0===i?void 0:i.categories,r);t.data.toc.categories[c].title="__default"!==a?a:"",t.data.toc.categories[c].editMode=!1,t.data.dirty=!0},updateQuestionTitle:function(t,e){var n=e.payload,i=n.categoryId,o=n.questionId,a=n.title;if(t.data){if(i){var r=P(t.data.toc.categories,i),c=P(t.data.toc.categories[r].pages,o);t.data.toc.categories[r].pages[c].title=a,t.data.toc.categories[r].pages[c].editMode=!1}t.data.dirty=!0}},moveCategory:function(t,e){var n,i,o,a=e.payload,r=a.from,c=a.to,s=null===t||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.toc)||void 0===i||null===(o=i.categories)||void 0===o?void 0:o[r.itemIndex];t.data.toc.categories.splice(r.itemIndex,1),t.data.toc.categories.splice(c.itemIndex,0,s),t.data.dirty=!0},moveQuestionWithinOrigin:function(t,e){var n,i,o,a,r=e.payload,c=r.from,s=r.to,u=null===t||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.toc)||void 0===i||null===(o=i.categories)||void 0===o||null===(a=o[c.parentIndex])||void 0===a?void 0:a.pages;u.splice(s.itemIndex,0,u.splice(c.itemIndex,1)[0]),t.data.dirty=!0},moveQuestionToNotEmptyCategory:function(t,e){var n,i=e.payload,o=i.from,a=i.to,r=null===t||void 0===t||null===(n=t.data.toc)||void 0===n?void 0:n.categories;r[a.parentIndex].pages.splice(a.itemIndex,0,r[o.parentIndex].pages.splice(o.itemIndex,1)[0]),t.data.dirty=!0},removeQuestion:function(t,e){var n,i,o,a,r,c,s=e.payload,u=s.category_id,l=s.article_id,d=P(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.toc)||void 0===i?void 0:i.categories,u),p=P(null===t||void 0===t||null===(o=t.data)||void 0===o||null===(a=o.toc)||void 0===a||null===(r=a.categories)||void 0===r||null===(c=r[d])||void 0===c?void 0:c.pages,l);t.data.toc.categories[d].pages.splice(p,1),t.data.dirty=!0},removeCategory:function(t,e){var n,i,o,a,r,c=e.payload.id,s=P(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.toc)||void 0===i?void 0:i.categories,c);t.data.toc.categories.splice(s,1),(null===t||void 0===t||null===(o=t.data)||void 0===o||null===(a=o.toc)||void 0===a||null===(r=a.categories)||void 0===r?void 0:r.length)||(t.data.toc=I),t.data.dirty=!0},setQuestion:function(t,e){var n=e.payload;t.question=function(t,e){var n;return k(k({},t),{},{content:k(k({},t.content),{},{questionStatement:(null===(n=t.content)||void 0===n?void 0:n.questionStatement)||_.a}),skills:((null===t||void 0===t?void 0:t.skills)||[]).filter((function(t){return e.indexOf(t)>=0}))})}(n.data,t.data.skills),t.question[v.a]=n[v.a]},setRestoredQuestion:function(t,e){var n=e.payload;t.question&&(t.question.content=n.data.content,t.question.protected_content=n.data.protected_content,t.question.question_type=n.data.question_type,t.question.difficulty=n.data.difficulty,t.question.relevant_lessons=n.data.relevant_lessons,t.question.skills=n.data.skills,t.question.snapshot_loaded=!0)},clearRestoredQuestion:function(t){t.question&&(t.question.content=null,t.question.protected_content=null,t.question.question_type=null,t.question.difficulty=null,t.question.snapshot_loaded=!1)},updateQuestionData:function(t,e){var n=e.payload;t.question.content=n.content,t.question.protected_content=n.protected_content,t.question.question_type=n.question_type,t.question.difficulty=n.difficulty,t.question.skills=n.skills,t.question.relevant_lessons=n.relevant_lessons,t.question.dirty=!0},updateQuestionETag:function(t,e){var n,i=e.payload;t.question=null!==(n=t.question)&&void 0!==n?n:null,t.question[v.a]=i[v.a],i.saved&&(t.question.dirty=!1,t.question.modified=(new Date).toISOString())},postAssessmentSave:function(t,e){var n=e.payload;t.data[v.a]=n,t.data.dirty=!1},clearQuestion:function(t){t.question=null},updateProgress:function(t,e){var n=e.payload;t.question.progress=n}})});e.b=A.reducer;var C=k(k({},A.actions),{},{load:function(t){var e=t.author_id,n=t.collection_id,i=t.assessment_id,o=t.course_url_slug,a=void 0===o?"":o,r=t.page_url_slug,s=void 0===r?"":r,l=t.mode;return function(t){var o=a&&s?"assessment/".concat(a,"/").concat(s):"assessment/".concat(e,"/").concat(n,"/").concat(i),r="view"===l||"compare"===l?o:"author/".concat(e,"/collection/").concat(n,"/assessment/").concat(i);return t(Object(c.a)({},u.a,{types:A.actions,endpoint:r,postProcess:R,getHeaders:!0})).then((function(e){e&&t(C.updateETag(e.xhr.headers.get(v.a)))}))}},save:function(t){var e=t.assessment;return function(t){return Object(O.t)(J(e)).then((function(e){e&&t(C.postAssessmentSave(e.xhr.headers.get(v.a)))}))}},prepareDockerOnSetAssessment:function(t){return function(){var e=Object(r.a)(a.a.mark((function e(n,i){var o,r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(null===t||void 0===t?void 0:t.docker)?k(k({},t.docker),{},{envs:null!==(o=t.docker.envs)&&void 0!==o?o:[]}):m.e,e.next=3,Object(j.g)();case 3:c=e.sent,s=k(k({},r),{},{container:k(k({},r.container),{},{liveInstance:c})}),n(S.b.setObject(s));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},saveQuestion:function(t){var e=t.question;return function(t){return Object(O.u)(q(e)).then((function(e){var n;e&&t(C.updateQuestionETag((n={},Object(c.a)(n,v.a,e.xhr.headers.get(v.a)),Object(c.a)(n,"saved",!0),n)))}))}},loadQuestion:function(t){return function(e){return Object(O.q)(t).then((function(t){if(null===t||void 0===t?void 0:t.data){var n=JSON.parse(t.data);return e(C.setQuestion(Object(c.a)({data:n},v.a,t.xhr.headers.get(v.a)))),n}}))}},loadQuestionSnapshot:function(t,e,n,i){return function(n){return Object(O.r)(t,e,i,f.r.ASSESSMENT_QUESTION).then((function(t){if(null===t||void 0===t?void 0:t.data){var e=JSON.parse(t.data);return n(C.setRestoredQuestion({data:e})),e}}))}}}),D=function t(e,n){return function(e,i){return n&&e(n),e(g.b.show(h.t,{status:"WAIT",text:"Saving Assessment"})),e(C.save({assessment:k(k({},i().assessment.data),{},{docker:JSON.stringify(Object(m.b)(i().dockerDetails))})})).then((function(){e(g.b.show(h.t,{status:"SUCCESS",text:"Assessment saved"}))})).catch((function(i){var o;Object(b.a)(i,e);var a=null===i||void 0===i||null===(o=i.responseJSON)||void 0===o?void 0:o.errorText;i.status===y.c.AlreadyExistsException&&a===y.b.versionOutDatedMessage?e(B((function(){e(C.updateETag(f.I)),e(t(void 0,n))}))):e(g.b.show(h.t,{status:"ERROR",text:"Failed to save assessment"}))}))}},R=function(t){var e=t.data,n=JSON.parse(e),i=n.toc;return Object.keys(i).length||(n=k(k({},n),{},{toc:I,dirty:!1})),n},U=function(t){var e=t.map((function(t){return Object(x.a)((null===t||void 0===t?void 0:t.text)||"","concepts").reduce((function(t,e){var n=e.name;return k(k({},t),{},Object(c.a)({},n,!0))}),{})})).reduce((function(t,e){return k(k({},t),e)}),{});return Object.keys(e)},J=function(t){var e=t.udata_files.map((function(t){return t.file_id}));e=JSON.stringify(e);var n=JSON.stringify(t.toc);return k(k({},t),{},{udata_files:e,toc:n,dirty:!1,concept_list:U([t.summary])})},q=function(t){var e,n,o,a=[];"AssessmentFreeText"===t.question_type?a=U([].concat(Object(i.a)(null===t||void 0===t||null===(e=t.protected_content)||void 0===e?void 0:e.answers),[null===t||void 0===t||null===(n=t.content)||void 0===n?void 0:n.questionStatement])):a=U([null===t||void 0===t||null===(o=t.content)||void 0===o?void 0:o.questionStatement]);return k(k({},t),{},{concept_list:a})},M=function t(e){return function(n,i){return e&&n(e),n(g.b.show(h.t,{status:"WAIT",text:"Saving Question"})),n(C.saveQuestion({question:i().assessment.question})).then((function(){n(g.b.show(h.t,{status:"SUCCESS",text:"Question saved"}))})).catch((function(i){var o,a=null===i||void 0===i||null===(o=i.responseJSON)||void 0===o?void 0:o.errorText;i.status===y.c.AlreadyExistsException&&a===y.b.versionOutDatedMessage?n(B((function(){n(C.updateQuestionETag(Object(c.a)({},v.a,f.I))),n(t(e))}))):n(g.b.show(h.t,{status:"ERROR",text:"Failed to save question"}))}))}},F=function(t,e,n,i){return function(o){var a=i.file.name.split(" ").join("-"),r="/api/author/".concat(t,"/collection/").concat(e,"/containers/").concat(a,"/get_upload_url?assessment_id=").concat(n);return Object(w.a)({url:r,type:"GET"}).then(JSON.parse).then((function(t){var e=t.gcs_object_name,n=t.container_id,r=void 0===n?-1:n,c=t.blob_upload_url,s=t.upload_success_url,u=t.build_status_url,l=t.tarball_download_url,d=t.build_log_url,p=t.rebuild_image_url;return o(S.b.setFile(k(k({},i),{},{id:r,buildStatusUrl:u,tarballDownloadUrl:l,buildLogUrl:d,rebuildImageUrl:p,file:{name:a,size:i.file.size,awaitingUpload:!0}}))),{onUploadSuccess:function(){return Object(w.a)({url:s,type:"POST",data:{gcs_object_name:e}},!0)},upload:function(){return Object(w.a)({url:c,type:"POST",data:i.file,processData:!1,contentType:i.file.type})}}})).catch((function(t){console.log(t)}))}},B=function(t){return function(e){e(g.b.close()),e(g.b.show(h.g,{onConfirm:t,cancelText:"Cancel",confirmText:"Save",title:"Conflicts",description:"The content you are editing has changed. The previous changes will be overwritten. Are you sure you want to save?"}))}}},OR4b:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("rePB"),o=n("03FM"),a=n("396a"),r=n("i7Pf");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u="author/work",l={author:"author_work",ref:"ref_work",collab:"collab_work"},d=Object(o.a)(),p=d.initialState,f=d.reducers,v=Object(r.b)({name:u,initialState:p,reducers:s(s({},f),{},{delete:function(t,e){var n,i=e.payload,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"author";i&&t.loaded&&(t.data.work_summaries[l[o]]=null===(n=t.data.work_summaries)||void 0===n?void 0:n[l[o]].filter((function(t){return t.id!==i})))}})});e.b=v.reducer;var g=function(t,e){return function(n){var o=JSON.parse(n),a=Object.keys(t).length?t:o.work_summaries;return o.work_summaries=s(s({},a),{},Object(i.a)({},"".concat(e,"_work"),o.work_summaries["".concat(e,"_work")])),o}},h=s(s({},v.actions),{},{load:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"author",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)({},a.a,{types:v.actions,endpoint:"".concat(u,"/").concat(t),postProcess:g(e,t)})}})},OYQK:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var i={operationNotAllowedException:400,accessDeniedException:403,AlreadyExistsException:409,serverError:500},o={AssetUploadFailedException:"ASSET_UPLOAD_FAILED"},a={versionOutDatedMessage:"Version outdated",shotUrlNotUniqueMessage:"Shot already exists with url",canonicalUrlNotValid:"Invalid Canonical Url.",programmaticallyCancelled:"Operation was programmatically cancelled"}},QJIx:function(t,e,n){"use strict";e.a={version:"2.0",text:"",mdHtml:"",cursorPosition:{line:0,ch:0}}},VMC0:function(t,e,n){"use strict";n.d(e,"b",(function(){return f}));var i=n("o0o1"),o=n.n(i),a=n("HaE+"),r=n("rePB"),c=n("i7Pf"),s=n("XZhq");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={showModal:!1,typeToShow:null,params:null},p=Object(c.b)({name:"modals",initialState:d,reducers:{show:{reducer:function(t,e){var n=e.payload,i=n.typeToShow,o=n.params,a=void 0===o?null:o;t.showModal=!0,t.typeToShow=i,a&&(t.params=a)},prepare:function(t,e){return{payload:{typeToShow:t,params:e}}}},update:function(t,e){var n=e.payload;n&&(t.params=n)},showOrUpdate:{reducer:function(t,e){var n=e.payload,i=n.typeToShow,o=n.params,a=void 0===o?null:o;t.showModal||(t.showModal=!0,t.typeToShow=i),a&&(t.params=a)},prepare:function(t,e){return{payload:{typeToShow:t,params:e}}}},close:function(){return d}}});e.a=p.reducer;var f=l(l({},p.actions),{},{actionWithMessages:function(t,e,n,i){return function(){var r=Object(a.a)(o.a.mark((function a(r){var c;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r(f.show(s.t,{status:"WAIT",text:e})),o.prev=1,o.next=4,r(t);case 4:return c=o.sent,r(f.update({status:"SUCCESS",text:n})),o.abrupt("return",c);case 9:throw o.prev=9,o.t0=o.catch(1),r(f.update({status:"ERROR",text:i})),o.t0;case 13:case"end":return o.stop()}}),a,null,[[1,9]])})));return function(t){return r.apply(this,arguments)}}()}})},WAQY:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("o0o1"),o=n.n(i),a=n("HaE+"),r=n("rePB"),c=n("clVV"),s=n("i7Pf");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=Object(s.b)({name:"user/courseCompletion",initialState:{},reducers:{set:function(t,e){var n=e.payload;return l(l({},t),n)},setAll:function(t,e){return e.payload},reset:function(t){}}});e.b=d.reducer;var p=l(l({},d.actions),{},{load:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;return function(){var r=Object(a.a)(o.a.mark((function a(r,s){var u,d,f;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e){o.next=2;break}return o.abrupt("return");case 2:return u=t.filter((function(t){return"collection"===t.doc_type})).map((function(t){return{map_name:"CourseCompletion_".concat(t.author_id,"_").concat(t.id),map_keys:null}})),o.next=5,Object(c.p)(u);case 5:d=o.sent,f=l(l({},n),JSON.parse(d)),"function"===typeof i?i(f):r(p.setAll(f));case 8:case"end":return o.stop()}}),a)})));return function(t,e){return r.apply(this,arguments)}}()}})},WVQk:function(t,e,n){"use strict";n.d(e,"b",(function(){return v}));var i=n("rePB"),o=n("03FM"),a=n("396a"),r=n("i7Pf");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u=Object(o.a)(),l=u.initialState,d=u.reducers,p=Object(r.b)({name:"reader/edpresso/featured",initialState:l,reducers:s(s({},d),{},{bookmark:{reducer:function(t,e){var n,i,o,a=e.payload,r=a.isBookmarkedByReader,c=a.shotId,s=null!==(n=null===t||void 0===t||null===(i=t.data)||void 0===i||null===(o=i.edpresso_shots)||void 0===o?void 0:o.findIndex((function(t){return t.id===c})))&&void 0!==n?n:-1;t.loaded&&s>=0&&(t.data.edpresso_shots[s].isBookmarkedByReader=r)},prepare:function(t,e){return{payload:{isBookmarkedByReader:t,shotId:e}}}}})});e.a=p.reducer;var f=function(t){return function(e){var n=JSON.parse(e);return n.edpresso_shots=t.concat(n.edpresso_shots),n}},v=s(s({},p.actions),{},{load:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"published",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return t=c?"reader/shots/".concat(c):r?"edpresso/shots?status=published&cursor=".concat(e):"edpresso/shots?status=".concat(o,"&cursor=").concat(e),Object(i.a)({},a.a,{types:p.actions,endpoint:t,postProcess:f(n)})}})},X9L9:function(t,e,n){"use strict";n.d(e,"b",(function(){return a}));var i=n("i7Pf"),o=Object(i.b)({name:"notFoundPage",initialState:!1,reducers:{set:function(t,e){return e.payload}}});e.a=o.reducer;var a=o.actions},XZhq:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"A",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"m",(function(){return r})),n.d(e,"o",(function(){return c})),n.d(e,"s",(function(){return s})),n.d(e,"t",(function(){return u})),n.d(e,"w",(function(){return l})),n.d(e,"x",(function(){return d})),n.d(e,"y",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"r",(function(){return v})),n.d(e,"q",(function(){return g})),n.d(e,"z",(function(){return h})),n.d(e,"B",(function(){return b})),n.d(e,"F",(function(){return y})),n.d(e,"E",(function(){return O})),n.d(e,"u",(function(){return _})),n.d(e,"g",(function(){return m})),n.d(e,"j",(function(){return j})),n.d(e,"p",(function(){return S})),n.d(e,"f",(function(){return w})),n.d(e,"l",(function(){return x})),n.d(e,"k",(function(){return E})),n.d(e,"v",(function(){return k})),n.d(e,"C",(function(){return I})),n.d(e,"I",(function(){return P})),n.d(e,"n",(function(){return T})),n.d(e,"i",(function(){return N})),n.d(e,"H",(function(){return L})),n.d(e,"J",(function(){return A})),n.d(e,"K",(function(){return C})),n.d(e,"b",(function(){return D})),n.d(e,"G",(function(){return R})),n.d(e,"h",(function(){return U})),n.d(e,"a",(function(){return J})),n.d(e,"D",(function(){return q}));var i="ArticleSettings",o="ShotSettings",a="Checkout",r="Login",c="MarkdownPaste",s="PrivacyPolicy",u="Progress",l="Recover",d="ResendVerification",p="ResetPassword",f="ChangePassword",v="PayoutMethods",g="PaymentInfo",h="ReturnPolicy",b="Signup",y="TermsOfService",O="Table",_="ReaderPreferences",m="Confirmation",j="GiftCourse",S="OutputTransform",w="ConceptEditor",x="GroupPurchase",E="GroupEdit",k="EdpressoContributor",I="SubmitCourseForReview",P="RecruitingCostCalculatorUserForm",T="MarkdownHelp",N="FreehandDrawing",L="ImageUpload",A="Video",C="HighlightsViewer",D="AddSubscriptionUsers",R="UpdateConfirmation",U="EditCoupon",J="AddEmployeeProfile",q="SuggestAShot"},abDY:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n("KQm4"),o=n("rePB"),a=n("03FM"),r=n("396a"),c=n("i7Pf");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l="edpresso/bookmarked-shots",d=Object(a.a)(),p=d.initialState,f=d.reducers,v=Object(c.b)({name:l,initialState:p,reducers:u(u({},f),{},{set:function(t,e){var n,o,a,r=e.payload,c=r.isBookmarkedByReader,s=r.shot,l=null!==(n=null===(o=t.data)||void 0===o||null===(a=o.bookmarked_shots)||void 0===a?void 0:a.findIndex((function(t){return t.id===s.id})))&&void 0!==n?n:-1;if(t.loaded&&l>=0)t.data.bookmarked_shots[l].isBookmarkedByReader=c,c||t.data.bookmarked_shots.splice(l,1);else if(t.loaded){var d=u(u({},s),{},{isBookmarkedByReader:c});t.data.bookmarked_shots=[].concat(Object(i.a)(t.data.bookmarked_shots),[d])}}})});e.b=v.reducer;var g=u(u({},v.actions),{},{load:function(){return Object(o.a)({},r.a,{types:v.actions,endpoint:l,postProcess:JSON.parse})}})},cNmg:function(t,e,n){"use strict";var i=n("jxKE");e.a=function(t,e){var n,o;if(e===i.L.LESSON)return i.j.COLLECTION;var a=t||(null===(n=window)||void 0===n||null===(o=n.location)||void 0===o?void 0:o.pathname);return(null===a||void 0===a?void 0:a.startsWith("/path"))?i.j.PATH:(null===a||void 0===a?void 0:a.startsWith("/module"))?i.j.MODULE:i.j.COLLECTION}},clVV:function(t,e,n){"use strict";n.d(e,"w",(function(){return N})),n.d(e,"e",(function(){return L})),n.d(e,"m",(function(){return A})),n.d(e,"p",(function(){return C})),n.d(e,"A",(function(){return J})),n.d(e,"l",(function(){return q})),n.d(e,"y",(function(){return M})),n.d(e,"g",(function(){return Q})),n.d(e,"h",(function(){return H})),n.d(e,"s",(function(){return G})),n.d(e,"z",(function(){return V})),n.d(e,"G",(function(){return Y})),n.d(e,"n",(function(){return K})),n.d(e,"k",(function(){return W})),n.d(e,"F",(function(){return z})),n.d(e,"o",(function(){return X})),n.d(e,"b",(function(){return $})),n.d(e,"i",(function(){return tt})),n.d(e,"v",(function(){return et})),n.d(e,"a",(function(){return it})),n.d(e,"c",(function(){return ot})),n.d(e,"d",(function(){return at})),n.d(e,"x",(function(){return rt})),n.d(e,"D",(function(){return ct})),n.d(e,"B",(function(){return st})),n.d(e,"C",(function(){return ut})),n.d(e,"q",(function(){return lt})),n.d(e,"r",(function(){return dt})),n.d(e,"u",(function(){return ft})),n.d(e,"j",(function(){return vt})),n.d(e,"t",(function(){return gt})),n.d(e,"f",(function(){return ht})),n.d(e,"E",(function(){return bt}));var i=n("Ff2n"),o=n("rePB"),a=n("o0o1"),r=n.n(a),c=n("HaE+"),s=n("rfrl"),u=n("fNkK"),l=n("5R4e"),d=n("OpYl"),p=n("+Zpp"),f=n("9wcz"),v=n.n(f),g=n("VMC0"),h=n("AkIC"),b=n("XZhq"),y=n("OYQK"),O=n("Vgjn"),_=n("Evd+"),m=n("G384"),j=n("9dyO"),S=n("OR4b"),w=n("jxKE"),x=n("pLgj"),E=n("NHG4"),k=n("cNmg"),I=n("9jYD");function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N=function(){return function(t){t(j.a.reset()),t(h.b.set({isLoading:!1,isLoaded:!1}))}},L=function(t){var e=t.isMini,n=void 0!==e&&e,i=t.work_type,o=void 0===i?"":i,a=t.pathId,r=void 0===a?"":a;return Object(u.a)({url:"/api/author/collection".concat(o?"?work_type=".concat(o):""),type:"POST",data:{is_mini:n,path_id:r}})},A=function(t,e,n,i){var o="/api/author/".concat(t,"/collection/").concat(e,"/deleted-pages");return n&&(o+="?cursor=".concat(n)),i&&(o+="?pageSize=".concat(i)),Object(u.a)({url:o,type:"GET"})},C=function(t){return Object(u.a)({url:"/api/userdata/maps/get_values",type:"POST",data:{maps_keys_json:JSON.stringify({maps:t})}})},D=Object(s.a)((function(t,e){var n,i,o,a=null===t||void 0===t||null===(n=t.instance)||void 0===n||null===(i=n.details)||void 0===i?void 0:i.docker;a?(Object(m.b)(a),a.envs=null!==(o=a.envs)&&void 0!==o?o:[],a.container.liveInstance=e):t.instance.details.docker=_.e})),R=Object(s.a)((function(t,e){var n,i=null===t||void 0===t?void 0:t.docker;i?(Object(m.b)(i),i.envs=null!==(n=i.envs)&&void 0!==n?n:[],i.container.liveInstance=e):t.docker=_.e})),U=function(t,e){return function(){var n=Object(c.a)(r.a.mark((function n(i,o){var a,c,s,u,l,p,f,v;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!!(null===(a=o())||void 0===a||null===(c=a.user)||void 0===c||null===(s=c.info)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.user_id)||(null===t||void 0===t?void 0:t.is_user_loggedin)||e)&&!t.instance.details.allow_logged_out_executions){n.next=7;break}return n.next=4,Object(d.g)();case 4:n.t0=n.sent,n.next=8;break;case 7:n.t0={};case 8:if(f=n.t0,v=D(t,f),!!(null===(l=o())||void 0===l||null===(p=l.loader)||void 0===p?void 0:p.isLoading)){n.next=13;break}throw Error(y.b.programmaticallyCancelled);case 13:return n.next=15,i(j.a.set(v));case 15:return n.abrupt("return",i(x.b.setObject(v.instance.details.docker)));case 16:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}()},J=function(t){return function(){var e=Object(c.a)(r.a.mark((function e(n,i){var o,a,c,s,u,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!!!(null===(o=i())||void 0===o||null===(a=o.user)||void 0===a||null===(c=a.info)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.user_id)){e.next=7;break}return e.next=4,Object(d.g)();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0={};case 8:return u=e.t0,l=R(t,u),e.next=12,n(j.a.updateDockerForExternalLesson(l));case 12:return e.abrupt("return",n(x.b.setObject(l.docker)));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},q=function(t,e){return function(n){n(h.b.set({isLoading:!0,isLoaded:!1}));var i=Object(k.a)(null===e||void 0===e?void 0:e.asPath);return t.work_type||(t=T(T({},t),{},{work_type:i})),function(t){var e,n=t.author_id,i=t.collection_id,o=t.course_url_slug,a=t.is_draft_page,r=t.work_type;return e=o?"collection/".concat(o,"?work_type=").concat(r):a?"author/".concat(n,"/collection/").concat(i,"?work_type=").concat(r):"collection/".concat(n,"/").concat(i,"?work_type=").concat(r),Object(u.a)({url:"/api/".concat(e),type:"GET"},!0)}(t).then(function(){var o=Object(c.a)(r.a.mark((function o(a){var c,s,u,l,d,f,g,h,b,y,O;return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=a.data,u=JSON.parse(s),l=u.instance.details.work_type,d=u.instance.details.author_id,f=u.instance.details.collection_id,i===l||t.is_draft_page){o.next=9;break}if(!t.page_id){o.next=8;break}return o.abrupt("return",e.replace("/".concat(l,"/page/[authorId]/[collectionId]/[pageId]"),"/".concat(l,"/page/").concat(d,"/").concat(f,"/").concat(t.page_id),{shallow:!0}));case 8:return o.abrupt("return",e.replace("/".concat(l,"/[authorId]/[collectionId]"),"/".concat(l,"/").concat(d,"/").concat(f),{shallow:!0}));case 9:return u=T(T({},u),{},{collectionId:f,authorId:d}),t.author_id&&!t.is_draft_page&&u.instance.details.url_slug&&(Object(p.c)(p.b.REDIRECTION,p.a.FRIENDLY_URL_REDIRECTION),g=Object(I.a)(u.instance.details.work_type,!!t.page_id),h="/".concat(g,"/").concat(u.instance.details.url_slug),b="/".concat(t.work_type,"/[authorId]/[collectionId]"),y="?authorId=".concat(e.query.author_id,"&collectionId=").concat(e.query.collection_id,"&courseUrlSlug=").concat(u.instance.details.url_slug),console.log("params",t.page_id,e.query.assessment_id),t.page_id&&(O=new v.a,h+="/".concat(O.encode(parseInt(t.page_id,10))),b="/collection/page/[authorId]/[collectionId]/[pageId]",y+="&pageId=".concat(t.page_id,"&pageUrlSlug=").concat(O.encode(parseInt(t.page_id,10)))),e.asPath.split("#")[0].endsWith("/assessment")&&(h+="/assessment"),e.asPath.split("#")[1]&&(h+="#".concat(e.asPath.split("#")[1])),e.replace(b+y,h,{shallow:!0})),o.next=13,n(U(u,null===(c=t)||void 0===c?void 0:c.is_draft_page));case 13:return o.abrupt("return",u);case 14:case"end":return o.stop()}}),o)})));return function(t){return o.apply(this,arguments)}}()).then((function(){n(h.b.set({isLoaded:!0,isLoading:!1}))})).catch((function(t){t.message!==y.b.programmaticallyCancelled&&Object(l.a)(t,n),401!==t.status&&n(h.b.set({isLoaded:!1,isLoading:!1}))}))}},M=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e),type:"PUT",data:n,headers:Object(o.a)({},O.a,i)},!0)},F=function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.j.COLLECTION;return function(o){return o(h.b.set({isLoading:!0})),o(g.b.show(b.t,{status:"WAIT",text:"Saving ".concat(Object(w.Y)(i))})),M(e.author_id,e.collection_id,e.payload,e.payload.eTag).then((function(t){var a=t.xhr,r=e.payload;o(j.a.updateETAG(a.headers.get(O.a))),o(g.b.update({status:"SUCCESS",text:"".concat(Object(w.Y)(i)," saved successfully")})),o(j.a.updateDetails(r)),"function"===typeof n&&n(),o(h.b.set({isLoaded:!0,isLoading:!1})),o(j.a.setDirty(!1))})).catch((function(n){Object(l.a)(n,o),n.status===y.c.AlreadyExistsException?(o(g.b.close()),e.payload.eTag=w.I,o(g.b.show(b.g,{onConfirm:function(){return o(t(e,void 0,i))},cancelText:"Cancel",confirmText:"Save",title:"Conflicts",description:"The content you are editing has changed. The previous changes will be overwritten. Are you sure you want to save?"}))):o(g.b.update({status:"ERROR",text:"Unable to Save Changes"})),o(h.b.set({isLoading:!1}))}))}},B=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"collection",i=arguments.length>3?arguments[3]:void 0;return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/publish?work_type=").concat(n),type:"POST",data:{path_id:i}})},Q=function(t,e){return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e),type:"DELETE"})},H=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.j.COLLECTION;return function(o,a){return o(g.b.show(b.t,{status:"WAIT",text:"Deleting ".concat(Object(w.Y)(i))})),Q(t,e).then(JSON.parse).then((function(t){t.is_submitted?o(g.b.update({status:"ERROR",text:"".concat(Object(w.Y)(i)," already submitted for deletion")})):t.is_approved&&!t.is_submitted?(o(g.b.update({status:"SUCCESS",text:"".concat(Object(w.Y)(i)," submitted for deletion")})),n&&o(S.a.load())):(o(g.b.update({status:"SUCCESS",text:"".concat(Object(w.Y)(i)," deleted")})),o(S.a.delete(e)))})).catch((function(t){console.log(t),Object(l.a)(t,o),o(g.b.update({status:"ERROR",text:"Unable to Delete ".concat(Object(w.Y)(i))}))}))}},G=function(t,e,n,i,o,a){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return function(c){return c(h.b.set({isLoading:!0})),c(g.b.update({status:"WAIT",text:i})),B(t,e,n,r).then((function(){c(j.a.publish()),c(g.b.update({status:"SUCCESS",text:o})),"function"===typeof a&&a(),c(h.b.set({isLoading:!1}))})).catch((function(t){var e,n,o=null;Object(l.a)(t,c),o=400===t.status&&(null===t||void 0===t||null===(e=t.responseJSON)||void 0===e||null===(n=e.errors)||void 0===n?void 0:n.categories)?t.responseJSON.errors.categories:"".concat(i," failed"),c(g.b.showOrUpdate(b.t,{status:"ERROR",text:o})),c(h.b.set({isLoading:!1}))}))}},V=function(t,e,n){return function(i){var o=n.file.name.split(" ").join("-"),a="/api/author/".concat(t,"/collection/").concat(e,"/containers/").concat(o,"/get_upload_url");return i(h.b.set({isLoaded:!1,isLoading:!0})),Object(u.a)({url:a,type:"GET"}).then(JSON.parse).then((function(t){var e=t.gcs_object_name,a=t.container_id,r=void 0===a?-1:a,c=t.blob_upload_url,s=t.upload_success_url,l=t.build_status_url,d=t.tarball_download_url,p=t.build_log_url,f=t.rebuild_image_url;return i(x.b.setFile(T(T({},n),{},{id:r,buildStatusUrl:l,tarballDownloadUrl:d,buildLogUrl:p,rebuildImageUrl:f,file:{name:o,size:n.file.size,awaitingUpload:!0}}))),i(h.b.set({isLoaded:!0,isLoading:!1})),{onUploadSuccess:function(){return Object(u.a)({url:s,type:"POST",data:{gcs_object_name:e}},!0)},upload:function(){return Object(u.a)({url:c,type:"POST",data:n.file,processData:!1,contentType:n.file.type})}}})).catch((function(t){console.log(t),i(h.b.set({isLoaded:!1,isLoading:!1}))}))}},Y=function(t){var e=t.authorId,n=t.collectionId,i=t.upload,o=t.onUploadSuccess,a=t.collectionType;return function(t){return t(x.b.updateBuildStatus("UPLOADING")),i().then((function(){return console.log("file uploaded successfully"),o()})).then((function(t){return JSON.parse(t.data)})).then((function(i){var o=i.image_name,r=void 0===o?"default_name":o;t(rt({author_id:e,collection_id:n},x.b.afterFileUpload(r),!1,a)),t(g.b.show(b.t,{status:"SUCCESS",text:"Docker Image build has been queued!!"}))})).catch((function(e){console.log("error while uploading docker file",e),t(x.b.updateBuildStatus("FAILURE")),t(g.b.show(b.t,{status:"ERROR",text:"Uploading Docker File failed"}))}))}},K=function(t,e){return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/image/upload/url"),type:"GET"})},W=function(t,e,n){return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/cerf/").concat(n,"/upload/url"),type:"GET"})},z=function(){var t=Object(c.a)(r.a.mark((function t(e,n,i){var o,a,c,s,l,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.upload_url,a=n.upload_success_url,c=n.gcs_object_name,s=function(){return Object(u.a)({url:o,type:"POST",data:i,processData:!1,contentType:i.type})},l=function(){return Object(u.a)({url:a,type:"POST",data:{gcs_object_name:c,file_size:i.size}})},e(g.b.show(b.t,{status:"WAIT",text:"Uploading code resource file"})),d=n,t.next=7,s();case 7:return console.log("code execution resource file uploaded successfully"),t.next=10,l();case 10:console.log("upload confirmed"),d.file=null,d.upload_url=null,d.upload_success_url=null,d.updated=!1,d.uploadStatus=w.V.UPLOAD_SUCCESSFUL,e(j.a.updateCodeExecResourceFile(d));case 17:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),X=function(t,e){return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/udata/upload/url"),type:"GET"})},Z=function(t,e){return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/page?work_type=").concat(Object(k.a)()),type:"POST"})},$=function(t,e){return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/assessment"),type:"POST"})},tt=function(t,e,n,i){return Object(u.a)({url:"/api/reader/external-offer",type:"POST",data:{author_id:t,collection_id:e,page_id:n,course_completion_percentage:i}})},et=function(t,e,n,i,o){return Object(u.a)({url:"/api/reader/external-offer/interaction/".concat(t),type:"POST",data:{author_id:n,collection_id:i,interaction:e,course_completion_percentage:o}})};function nt(t,e){var n,i,o=JSON.stringify(t.instance.details.toc),a=T({},t.instance.details),r=null!==(n=null===(i=a.code_exec_resource_metadata)||void 0===i?void 0:i.file_id)&&void 0!==n?n:null,c=JSON.stringify(a.udata_files.map((function(t){return t.file_id}))),s=JSON.stringify({code_themes:a.CodeThemes}),u=JSON.stringify(a.testimonials),l=JSON.stringify(Object(_.b)(e)),d=t[O.a],p=JSON.stringify({licensing:a.licensing}),f=a.tags.toString(),v=JSON.stringify({api_keys:a.api_keys});return delete a.api_keys,delete a.toc,delete a.udata_files,delete a.CodeThemes,delete a.testimonials,delete a.licensing,T(T({},a),{},{price:0===a.price?null:a.price,categories_json_string:o,testimonials_string:u,docker:l,user_data_file_ids_string:c,code_exec_resource_file_id:r,default_themes_json_string:s,api_keys_json_string:v,tags:f,eTag:d,licensing_json_string:p})}var it=function(t){var e=t.author_id,n=t.collection_id,i=t.category_id,o=t.index,a=t.createNewArticle,s=void 0===a||a,u=t.data,d=void 0===u?{}:u;return function(){var t=Object(c.a)(r.a.mark((function t(a,c){var u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return a(j.a.addArticle({category_id:i,article:t,index:o,data:d}))},s){t.next=5;break}u(),t.next=7;break;case 5:return a(h.b.set({isLoaded:!1,isLoading:!0})),t.abrupt("return",Z(e,n).then((function(t){var n=JSON.parse(t);n.author_id=e,u(n),a(h.b.set({isLoaded:!0,isLoading:!1}))})).catch((function(t){Object(l.a)(t,a),a(h.b.set({isLoaded:!1,isLoading:!1}))})));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},ot=function(t){var e=t.author_id,n=t.collection_id,i=t.assessment_id,o=t.category_id,a=t.index;return function(t,r){t(h.b.set({isLoaded:!1,isLoading:!0})),function(t,e,n){return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/assessment/").concat(n,"/question"),type:"POST"})}(e,n,i).then((function(e){var n=JSON.parse(e);t(E.a.addQuestion({category_id:o,question:n,index:a})),t(h.b.set({isLoaded:!0,isLoading:!1}))})).catch((function(e){Object(l.a)(e,t),t(h.b.set({isLoaded:!1,isLoading:!1}))}))}},at=function(t){var e=t.author_id,n=t.collection_id,i=t.category_id,o=t.src_article_id,a=t.src_article_title,r=t.collectionType;return function(t,c){return t(h.b.set({isLoaded:!1,isLoading:!0})),function(t,e,n){return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/page"),type:"POST",data:{collection_id:e,page_id:n,instance_type:"latest"}})}(e,n,o).then((function(o){var s=JSON.parse(o);s.title=a,t(j.a.cloneArticle({category_id:i,article:s}));var u=nt(c().author.collection,c().dockerDetails);t(F({author_id:e,collection_id:n,payload:u},void 0,r)),t(h.b.set({isLoaded:!0,isLoading:!1}))})).catch((function(e){Object(l.a)(e,t),t(h.b.set({isLoaded:!1,isLoading:!1}))}))}},rt=function(t,e){var n=t.author_id,i=t.collection_id,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w.j.COLLECTION;return function(){var t=Object(c.a)(r.a.mark((function t(c,s){var u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e);case 2:if(!o){t.next=4;break}return t.abrupt("return");case 4:return u=nt(s().author.collection,s().dockerDetails),t.abrupt("return",c(F({author_id:n,collection_id:i,payload:u},void 0,a)));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},ct=function(t,e){return Object(u.a)({url:"/api/notifications/".concat(t,"/").concat(e),type:"POST"})},st=function(t){var e=t.author_id,n=t.collection_id,i=t.assessment_id,o=t.question_id,a=t.protectedContent;return Object(u.a)({url:"/api/assessment/".concat(e,"/").concat(n,"/").concat(i,"/").concat(o),type:"POST",data:{answer:JSON.stringify(a),timestamp:(new Date).toISOString()}},!0)},ut=function(t){var e=t.author_id,n=t.collection_id,i=t.assessment_id;return Object(u.a)({url:"/api/assessment/".concat(e,"/").concat(n,"/").concat(i),type:"POST",data:{timestamp:(new Date).toISOString()}},!0)},lt=function(t){var e=t.authorId,n=t.collectionId,i=t.assessmentId,o=t.questionId,a="view"===t.mode?"/api/assessment/".concat(e,"/").concat(n,"/").concat(i,"/").concat(o):"/api/author/".concat(e,"/collection/").concat(n,"/assessment/").concat(i,"/question/").concat(o);return Object(u.a)({url:a,type:"GET"},!0)},dt=function(t,e,n,i){var o="/api/author/".concat(t,"/collection/").concat(e,"/page/snapshot?key=").concat(n,"&document_type=").concat(i);return Object(u.a)({url:o,type:"GET"},!0)},pt=function(t){return T(T({},((e=t).all_lessons,Object(i.a)(e,["all_lessons"]))),{},{content:{content:t.content,protected_content:t.protected_content},protected_content:void 0});var e},ft=function(t){return Object(u.a)({url:"/api/author/".concat(t.author_id,"/collection/").concat(t.collection_id,"/assessment/").concat(t.assessment_id,"/question/").concat(t.question_id),contentType:"application/json",processData:!1,type:"PUT",data:JSON.stringify(pt(t)),headers:Object(o.a)({},O.a,t[O.a])},!0)},vt=function(t,e,n){return Object(u.a)({url:"/api/author/".concat(t,"/collection/").concat(e,"/assessment/").concat(n,"/udata/upload/url"),type:"GET"})},gt=function(t){return Object(u.a)({url:"/api/author/".concat(t.author_id,"/collection/").concat(t.collection_id,"/assessment/").concat(t.assessment_id),contentType:"application/json",processData:!1,type:"PUT",data:JSON.stringify(t),headers:Object(o.a)({},O.a,t[O.a])},!0)},ht=function(t,e,n,i){var o="/api/assessment/begin/".concat(t,"/").concat(e,"/").concat(n);return i&&(o+="?continue=".concat(i)),Object(u.a)({url:o,type:"POST"})},bt=function(t){var e=t.upload,n=t.onUploadSuccess;return function(t){return t(x.b.updateBuildStatus("UPLOADING")),e().then((function(){return console.log("file uploaded successfully"),n()})).then((function(t){return JSON.parse(t.data)})).then(function(){var e=Object(c.a)(r.a.mark((function e(n){var i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.image_name,o=void 0===i?"default_name":i,t(x.b.afterFileUpload(o)),t(g.b.show(b.t,{status:"SUCCESS",text:"Docker Image build has been queued!!"}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error while uploading docker file",e),t(x.b.updateBuildStatus("FAILURE")),t(g.b.show(b.t,{status:"ERROR",text:"Uploading Docker File failed"}))}))}}},fh7V:function(t,e,n){"use strict";e.a={Code:!1,Markdown:!1,RunJS:!1,SPA:!1}},uNJL:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("1OyB"),o=n("rePB"),a=n("4mnY"),r=n("I1F8"),c=n("jxKE"),s=function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.d.COLLECTION_CATEGORY,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object(a.a)(),d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";Object(i.a)(this,t),Object(o.a)(this,"id",void 0),Object(o.a)(this,"title",void 0),Object(o.a)(this,"pages",void 0),Object(o.a)(this,"editMode",void 0),Object(o.a)(this,"type",void 0),Object(o.a)(this,"author_id",void 0),Object(o.a)(this,"collection_id",void 0),this.id=s?r.a:l,this.title=f||(e?"__default":s?"Recovered Lessons":u===c.d.ASSESSMENT?"Untitled Assessment":""),this.pages=[],this.editMode=n,this.type=u,this.author_id=d,this.collection_id=p}}}]);
//# sourceMappingURL=5f5b6a27f7e8f5569ef120598e834e30f08d20e1.142ee773543f77b5e121.js.map